<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Administrator Guide &mdash; Cloud Metrics  documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/fg-favicon.ico"/>
    <link rel="top" title="Cloud Metrics  documentation" href="index.html" />
    <link rel="next" title="Metric Shell" href="metrics.html" />
    <link rel="prev" title="Welcome to Cloud Metricsâ€™s documentation!" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><img src="_static/fg-logo-white-24x36.png">
          Cloud Metrics</a>
        <span class="navbar-text navbar-version pull-left"><b>4.0.1
</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Administrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="#usage-quickstart">Usage Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-fabric">Install fabric</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-python-sphinx-contrib-autorun">Install Python sphinx-contrib Autorun</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-mysql-client">Install MySQL Client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#linux">Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#osx">OSX</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#quick-deployment">Quick deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#production-version">Production Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="#development-version">Development Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#database">Database</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#mysql-installation">MySQL Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#access-information-futuregrid-cfg-and-db-mysql-tables-creation">Access Information (futuregrid.cfg) and DB (MySQL) tables creation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#obtaining-metric-data-from-logs-and-database">Obtaining metric data from logs and database</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#eucalyptus">Eucalyptus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#openstack">OpenStack</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nimbus">Nimbus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#generating-pdf-reports">Generating PDF reports</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-the-documentation">Creating the Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#production-web-pages-using-sphinx">Production Web Pages using Sphinx</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#database-configuration">Database Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#obtaining-cloud-usage-information">Obtaining Cloud Usage information</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Eucalyptus</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">OpenStack</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Nimbus</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#commands">Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-a-production-environment">Setting up a Production Environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id6">Production Web Pages using Sphinx</a></li>
<li class="toctree-l3"><a class="reference internal" href="#production-web-pages-using-flask">Production Web Pages using Flask</a></li>
<li class="toctree-l3"><a class="reference internal" href="#production-pdf-reports">Production PDF Reports</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">Metric Shell</a><ul>
<li class="toctree-l2"><a class="reference internal" href="metrics.html#starting-the-cloud-metric-shell">Starting the cloud metric shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html#the-set-command">The  &#8220;set&#8221; Command</a><ul>
<li class="toctree-l3"><a class="reference internal" href="metrics.html#set-the-date-range">Set the date range</a></li>
<li class="toctree-l3"><a class="reference internal" href="metrics.html#set-the-metric">Set the metric</a></li>
<li class="toctree-l3"><a class="reference internal" href="metrics.html#set-the-hostname">Set the hostname</a></li>
<li class="toctree-l3"><a class="reference internal" href="metrics.html#set-the-cloud-service">Set the cloud service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html#the-help-command">The &#8220;help&#8221; command</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html#the-analyze-command">The &#8220;analyze&#8221; command</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html#the-chart-command">The &#8220;chart&#8221; command</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html#the-csv-command">The &#8220;csv&#8221; command</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html#examples-of-using-the-metric-shell">Examples of using the metric shell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="metrics.html#daily-active-user-count">Daily active user count</a></li>
<li class="toctree-l3"><a class="reference internal" href="metrics.html#vms-count-by-project">VMs count by Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="metrics.html#three-metrics-in-a-single-chart">Three metrics in a single chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="metrics.html#create-a-summary-table-for-the-month-of-january">Create a summary table for the month of January</a></li>
<li class="toctree-l3"><a class="reference internal" href="metrics.html#create-a-summary-analysis-for-multiple-month">Create a summary analysis for multiple month</a></li>
<li class="toctree-l3"><a class="reference internal" href="metrics.html#python-program-to-create-a-summary-analysis-for-multiple-month">Python Program to create a summary analysis for multiple month</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Developers Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="highchart.html">Highchart demo in sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="todo.html">TODO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="todo.html#list">List</a></li>
<li class="toctree-l2"><a class="reference internal" href="todo.html#observations">Observations</a></li>
<li class="toctree-l2"><a class="reference internal" href="todo.html#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="todo.html#show-machine-image-counts-for-eucalyptus">Show machine image counts for Eucalyptus</a></li>
<li class="toctree-l3"><a class="reference internal" href="todo.html#showing-only-image-numbers-owned-by-the-userid-specified">Showing only image numbers owned by the userid specified::</a></li>
<li class="toctree-l3"><a class="reference internal" href="todo.html#displaying-details-about-images">Displaying details about images::</a></li>
<li class="toctree-l3"><a class="reference internal" href="todo.html#displaying-summary-values-about-images">Displaying summary values about images</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="repository.html">Directory Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="repository.html#file-contents">File contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="ubmod.html">UBMoD</a></li>
<li class="toctree-l1"><a class="reference internal" href="lighttpd.html">Stand Allone Web Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="lighttpd.html#instalation-of-lighttpd">Instalation of lighttpd</a></li>
<li class="toctree-l2"><a class="reference internal" href="lighttpd.html#using-the-standalone-server">Using the Standalone server</a></li>
<li class="toctree-l2"><a class="reference internal" href="lighttpd.html#browsing-the-contents">Browsing the contents</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Administrator Guide</a></li>
<li><a class="reference internal" href="#usage-quickstart">Usage Quickstart</a><ul>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#install-fabric">Install fabric</a></li>
<li><a class="reference internal" href="#install-python-sphinx-contrib-autorun">Install Python sphinx-contrib Autorun</a></li>
<li><a class="reference internal" href="#install-mysql-client">Install MySQL Client</a><ul>
<li><a class="reference internal" href="#linux">Linux</a></li>
<li><a class="reference internal" href="#osx">OSX</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#quick-deployment">Quick deployment</a><ul>
<li><a class="reference internal" href="#production-version">Production Version</a></li>
<li><a class="reference internal" href="#development-version">Development Version</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#database">Database</a><ul>
<li><a class="reference internal" href="#mysql-installation">MySQL Installation</a></li>
<li><a class="reference internal" href="#access-information-futuregrid-cfg-and-db-mysql-tables-creation">Access Information (futuregrid.cfg) and DB (MySQL) tables creation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#obtaining-metric-data-from-logs-and-database">Obtaining metric data from logs and database</a><ul>
<li><a class="reference internal" href="#eucalyptus">Eucalyptus</a></li>
<li><a class="reference internal" href="#openstack">OpenStack</a></li>
<li><a class="reference internal" href="#nimbus">Nimbus</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generating-pdf-reports">Generating PDF reports</a></li>
<li><a class="reference internal" href="#creating-the-documentation">Creating the Documentation</a></li>
<li><a class="reference internal" href="#production-web-pages-using-sphinx">Production Web Pages using Sphinx</a></li>
</ul>
</li>
<li><a class="reference internal" href="#database-configuration">Database Configuration</a><ul>
<li><a class="reference internal" href="#obtaining-cloud-usage-information">Obtaining Cloud Usage information</a></li>
<li><a class="reference internal" href="#id1">Eucalyptus</a></li>
<li><a class="reference internal" href="#id2">OpenStack</a></li>
<li><a class="reference internal" href="#id4">Nimbus</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#commands">Commands</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setting-up-a-production-environment">Setting up a Production Environment</a><ul>
<li><a class="reference internal" href="#id6">Production Web Pages using Sphinx</a></li>
<li><a class="reference internal" href="#production-web-pages-using-flask">Production Web Pages using Flask</a></li>
<li><a class="reference internal" href="#production-pdf-reports">Production PDF Reports</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="index.html" title="Previous Chapter: Welcome to Cloud Metricsâ€™s documentation!"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Welcome to Cloud...</span>
    </a>
  </li>
  <li>
    <a href="metrics.html" title="Next Chapter: Metric Shell"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Metric Shell &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="administrator-guide">
<h1><a class="toc-backref" href="#id7">Administrator Guide</a><a class="headerlink" href="#administrator-guide" title="Permalink to this headline">Â¶</a></h1>
<div class="sidebar">
<p class="first sidebar-title">.</p>
<div class="contents last topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#administrator-guide" id="id7">Administrator Guide</a></li>
<li><a class="reference internal" href="#usage-quickstart" id="id8">Usage Quickstart</a><ul>
<li><a class="reference internal" href="#installation" id="id9">Installation</a><ul>
<li><a class="reference internal" href="#prerequisites" id="id10">Prerequisites</a></li>
<li><a class="reference internal" href="#install-fabric" id="id11">Install fabric</a></li>
<li><a class="reference internal" href="#install-python-sphinx-contrib-autorun" id="id12">Install Python sphinx-contrib Autorun</a></li>
<li><a class="reference internal" href="#install-mysql-client" id="id13">Install MySQL Client</a><ul>
<li><a class="reference internal" href="#linux" id="id14">Linux</a></li>
<li><a class="reference internal" href="#osx" id="id15">OSX</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#quick-deployment" id="id16">Quick deployment</a><ul>
<li><a class="reference internal" href="#production-version" id="id17">Production Version</a></li>
<li><a class="reference internal" href="#development-version" id="id18">Development Version</a></li>
<li><a class="reference internal" href="#requirements" id="id19">Requirements</a></li>
<li><a class="reference internal" href="#database" id="id20">Database</a><ul>
<li><a class="reference internal" href="#mysql-installation" id="id21">MySQL Installation</a></li>
<li><a class="reference internal" href="#access-information-futuregrid-cfg-and-db-mysql-tables-creation" id="id22">Access Information (futuregrid.cfg) and DB (MySQL) tables creation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#obtaining-metric-data-from-logs-and-database" id="id23">Obtaining metric data from logs and database</a><ul>
<li><a class="reference internal" href="#eucalyptus" id="id24">Eucalyptus</a></li>
<li><a class="reference internal" href="#openstack" id="id25">OpenStack</a></li>
<li><a class="reference internal" href="#nimbus" id="id26">Nimbus</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generating-pdf-reports" id="id27">Generating PDF reports</a></li>
<li><a class="reference internal" href="#creating-the-documentation" id="id28">Creating the Documentation</a></li>
<li><a class="reference internal" href="#production-web-pages-using-sphinx" id="id29">Production Web Pages using Sphinx</a></li>
</ul>
</li>
<li><a class="reference internal" href="#database-configuration" id="id30">Database Configuration</a><ul>
<li><a class="reference internal" href="#obtaining-cloud-usage-information" id="id31">Obtaining Cloud Usage information</a></li>
<li><a class="reference internal" href="#id1" id="id32">Eucalyptus</a></li>
<li><a class="reference internal" href="#id2" id="id33">OpenStack</a></li>
<li><a class="reference internal" href="#id4" id="id34">Nimbus</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id35">Usage</a><ul>
<li><a class="reference internal" href="#commands" id="id36">Commands</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setting-up-a-production-environment" id="id37">Setting up a Production Environment</a><ul>
<li><a class="reference internal" href="#id6" id="id38">Production Web Pages using Sphinx</a></li>
<li><a class="reference internal" href="#production-web-pages-using-flask" id="id39">Production Web Pages using Flask</a></li>
<li><a class="reference internal" href="#production-pdf-reports" id="id40">Production PDF Reports</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="usage-quickstart">
<h1><a class="toc-backref" href="#id8">Usage Quickstart</a><a class="headerlink" href="#usage-quickstart" title="Permalink to this headline">Â¶</a></h1>
<p>The following are the current steps to bring all services for
cloud-metrics up and running. After you have Installed the software.
Naturally we could have included them in the Section <cite>ref:s-installation</cite>
one script, which we will do at a later time. For now, we want to keep
the services separated to ease development and debugging of various
parts. Naturally, if you can just pick the commands that you really
need and do not have to execute all of them. Over time, you will notice
which commands are needed for you. An overview of available commands
can be found with:</p>
<div class="highlight-python"><pre>$ fab -l</pre>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id9">Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="prerequisites">
<h3><a class="toc-backref" href="#id10">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this headline">Â¶</a></h3>
<p>We assume you have a valid python version (2.7.2 or higher) and all
the needed libraries on the system where you run the code.</p>
</div>
<div class="section" id="install-fabric">
<h3><a class="toc-backref" href="#id11">Install fabric</a><a class="headerlink" href="#install-fabric" title="Permalink to this headline">Â¶</a></h3>
<p>Our setup scripts use Fabric which is a nice management tool and
is for our purpose a fancy makefile like tool (with many additional
feature). This tool (and several other packages) uses the python-dev
package. If you do not have it installed already you can get by doing
the following:</p>
<div class="highlight-python"><pre>$ sudo apt-get install python-dev</pre>
</div>
<p>Fabric can now be installed as follows:</p>
<div class="highlight-python"><pre>$ pip install fabric</pre>
</div>
</div>
<div class="section" id="install-python-sphinx-contrib-autorun">
<h3><a class="toc-backref" href="#id12">Install Python sphinx-contrib Autorun</a><a class="headerlink" href="#install-python-sphinx-contrib-autorun" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-python"><pre>$ hg clone http://bitbucket.org/birkenfeld/sphinx-contrib/
$ cd sphinx-contrib/autorun
$ python setup.py install</pre>
</div>
</div>
<div class="section" id="install-mysql-client">
<h3><a class="toc-backref" href="#id13">Install MySQL Client</a><a class="headerlink" href="#install-mysql-client" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="linux">
<h4><a class="toc-backref" href="#id14">Linux</a><a class="headerlink" href="#linux" title="Permalink to this headline">Â¶</a></h4>
<div class="highlight-python"><pre>sudo apt-get install libmysqlclient-dev
sudo apt-get install python-dev</pre>
</div>
</div>
<div class="section" id="osx">
<h4><a class="toc-backref" href="#id15">OSX</a><a class="headerlink" href="#osx" title="Permalink to this headline">Â¶</a></h4>
<ol class="arabic simple">
<li>install mysql from the oracle web site</li>
<li>add /usr/local/mysql/bin to your local path</li>
<li>and for some reason also do</li>
</ol>
<div class="highlight-python"><pre>sudo ln -s /usr/local/mysql/bin/mysql_config /usr/bin/mysql_config
sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib</pre>
</div>
<p>or</p>
<div class="highlight-python"><pre>http://mxcl.github.com/homebrew/
brew install mysql
pip install MySQL-python</pre>
</div>
</div>
</div>
</div>
<div class="section" id="quick-deployment">
<h2><a class="toc-backref" href="#id16">Quick deployment</a><a class="headerlink" href="#quick-deployment" title="Permalink to this headline">Â¶</a></h2>
<p>This quick deployment is targeted for ubuntu. It can be achieved in several easy steps.
First, obtain a vanilla ubuntu system. Make sure that git is installed, which is standard by now.</p>
<p>Next execute the following commands</p>
<div class="highlight-python"><pre>$ git clone git@github.com:futuregrid/cloud-metrics.git
$ cd cloud-metrics
$ fab -f install/fabfile.py deploy
$ fab build.install</pre>
</div>
<p>Some developers may prefer using https for accessing git:</p>
<div class="highlight-python"><pre>$ git clone https://github.com/futuregrid/cloud-metrics</pre>
</div>
<div class="section" id="production-version">
<h3><a class="toc-backref" href="#id17">Production Version</a><a class="headerlink" href="#production-version" title="Permalink to this headline">Â¶</a></h3>
<p>The FG Cloud Metric is available from PyPI and can be easily installed
with pip. We recommend that you use virtualenv to manage your local
python installation:</p>
<div class="highlight-python"><pre>pip install futuregrid-cloud-metric</pre>
</div>
</div>
<div class="section" id="development-version">
<h3><a class="toc-backref" href="#id18">Development Version</a><a class="headerlink" href="#development-version" title="Permalink to this headline">Â¶</a></h3>
<p>The development version is available from github at and you can clone
it and install with:</p>
<div class="highlight-python"><pre>git clone https://github.com/futuregrid/cloud-metrics
cd cloud-metrics
python setup.py install</pre>
</div>
</div>
<div class="section" id="requirements">
<h3><a class="toc-backref" href="#id19">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this headline">Â¶</a></h3>
<p>Although the install of fabfile contains the automatic
installation of
requirements, we would like to point out that changes in
the requirements.txt
file that you may require additiona execution with:</p>
<div class="highlight-python"><pre>pip install -r requirements.txt</pre>
</div>
<p>If you do not change the requirements file, this step will be
automatically executed as part of the installation.</p>
</div>
<div class="section" id="database">
<h3><a class="toc-backref" href="#id20">Database</a><a class="headerlink" href="#database" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="mysql-installation">
<h4><a class="toc-backref" href="#id21">MySQL Installation</a><a class="headerlink" href="#mysql-installation" title="Permalink to this headline">Â¶</a></h4>
<p>You should have installed mysql on your machine or remote.</p>
<div class="highlight-python"><pre>sudo apt-get update
sudo apt-get dist-upgrade
sudo apt-get install mysql-server mysql-client
sudo mysqladmin -u root -h localhost password 'mypassword'</pre>
</div>
<p>TODO: Once we have moved to mongodb, this section should be replaced with mongodb installation.</p>
</div>
<div class="section" id="access-information-futuregrid-cfg-and-db-mysql-tables-creation">
<h4><a class="toc-backref" href="#id22">Access Information (futuregrid.cfg) and DB (MySQL) tables creation</a><a class="headerlink" href="#access-information-futuregrid-cfg-and-db-mysql-tables-creation" title="Permalink to this headline">Â¶</a></h4>
<p>futuregrid.cfg includes dbusername, password, hostname, port number,
and database name. Database tables (MySQL) will also be created.</p>
<div class="highlight-python"><pre>$ fg-metric-install
==========================================
Installing Cloud Metrics ...
==========================================

If you have installed mysql database for Cloud Metrics,
you will be asked to type the database information.

---------------------------------------------------
mysql database info
---------------------------------------------------
db host ip address: &lt;type ip address&gt;
db port (default: 3306): &lt;type port number or enter&gt;
db username: &lt;type username&gt;
db password: &lt;type password&gt;
db name: &lt;type dbname&gt;

... creating $HOME/.futuregrid/futuregrid.cfg file ...
... database information successfully saved. ...

----------------------------------------------------
MySQL table creation
----------------------------------------------------
... creating MySQL tables for Cloud Metrics ...
... instance table created ...
... userinfo table created ...
... projectinfo table created ...
... cloudplatform table created ...

MySQL database setup successfully done.</pre>
</div>
</div>
</div>
<div class="section" id="obtaining-metric-data-from-logs-and-database">
<h3><a class="toc-backref" href="#id23">Obtaining metric data from logs and database</a><a class="headerlink" href="#obtaining-metric-data-from-logs-and-database" title="Permalink to this headline">Â¶</a></h3>
<p>There are two means to collect metric data from IaaS services:
log parsing, and database converting. The collected data will
be stored into Cloud Metrics database.</p>
<div class="section" id="eucalyptus">
<h4><a class="toc-backref" href="#id24">Eucalyptus</a><a class="headerlink" href="#eucalyptus" title="Permalink to this headline">Â¶</a></h4>
<p>For Eucalyptus, Cloud Metrics uses fg-logparser to parse and
store metric information to Cloud Metrics database.</p>
<p><em>This is a real-time collector with log watcher python module.</em></p>
<ul class="simple">
<li>Log into management node
<tt class="docutils literal"><span class="pre">`ssh</span> <span class="pre">$mangement_node_ip`</span></tt></li>
<li>Install Cloud Metrics
<tt class="docutils literal"><span class="pre">`pip</span> <span class="pre">install</span> <span class="pre">futuregrid-cloud-metrics`</span></tt></li>
<li>Setup configuration
<tt class="docutils literal"><span class="pre">`fg-metric-install`</span></tt></li>
<li>Run a log parser script
<tt class="docutils literal"><span class="pre">`fg-logparser</span> <span class="pre">-i</span> <span class="pre">/var/log/eucalyptus`</span></tt>
<em>Log directory should be accessible</em></li>
<li>Run a log parser with real-time logwatcher script (optional)
<tt class="docutils literal"><span class="pre">`logwatcher.py|fg-logparser</span> <span class="pre">-i</span> <span class="pre">-`</span></tt></li>
</ul>
</div>
<div class="section" id="openstack">
<h4><a class="toc-backref" href="#id25">OpenStack</a><a class="headerlink" href="#openstack" title="Permalink to this headline">Â¶</a></h4>
<p>For OpenStack, Cloud Metrics converts OpenStack&#8217;s MySQL database
to Cloud Metrics database using fg-converter.</p>
<p><em>This works in a daily basis with cron.</em></p>
<ul>
<li><p class="first">Get SQL database (MySQL/PostgreSQL) access</p>
<ul>
<li><p class="first">Configuring the SQL Database (MySQL) on the OpenStack Cloud Controller Node</p>
<ul>
<li><p class="first">Login to the Cloud Controller
<tt class="docutils literal"><span class="pre">ssh</span> <span class="pre">$openstack_controller</span></tt></p>
</li>
<li><p class="first">Start the mysql command line client:
<tt class="docutils literal"><span class="pre">mysql</span> <span class="pre">-u</span> <span class="pre">root</span> <span class="pre">-p</span></tt></p>
</li>
<li><p class="first">Create a MySQL user (cloudmetrics) and password for the nova, keystone database that has read control of the database.</p>
<div class="highlight-python"><pre>GRANT SELECT ON nova.* to 'cloudmetrics'@'%' IDENTIFIED BY '[YOUR_PASSWORD]';
GRANT SELECT ON keystone.* to 'cloudmetrics'@'%' IDENTIFIED BY '[YOUR_PASSWORD]';</pre>
</div>
</li>
</ul>
</li>
<li><p class="first">Configuring the SQL Database (PostgreSQL) on the OpenStack Cloud Controller Node</p>
<ul class="simple">
<li>TBD</li>
</ul>
</li>
</ul>
</li>
<li><p class="first">Configuring data importer</p>
<div class="highlight-python"><pre>fg-metric-converter -p openstack -n $nodename -db mysql[postreSQL] -dh $mysql_server_ip -du cloudmetrics -dp YOUR_PASSWORD</pre>
</div>
<ul>
<li><p class="first">What fg-metric-converter basically does...</p>
<div class="highlight-python"><pre>SELECT * from instances (OPENSTACK)
and then
INSERT into instance (CLOUD METRICS)</pre>
</div>
</li>
</ul>
</li>
<li><p class="first">New cron job for fg-metric-converter</p>
<div class="highlight-python"><pre>5 * * * * fg-metric-converter ...</pre>
</div>
</li>
</ul>
<p><em>If you have several openstack services, iterate these steps.</em></p>
</div>
<div class="section" id="nimbus">
<h4><a class="toc-backref" href="#id26">Nimbus</a><a class="headerlink" href="#nimbus" title="Permalink to this headline">Â¶</a></h4>
<p>For Nimbus, Cloud Metrics simplys converts Nimbus&#8217; sqlite3
to Cloud Metrics database using fg-converter.</p>
<p><em>This is a daily update based on cron.</em></p>
<ul>
<li><p class="first">Login into Nimbus management node
<tt class="docutils literal"><span class="pre">ssh</span> <span class="pre">$nimbus</span> <span class="pre">node</span></tt></p>
</li>
<li><p class="first">Make a copy of sqlite3 database files to local
<tt class="docutils literal"><span class="pre">scp</span> <span class="pre">-r</span> <span class="pre">-i</span> <span class="pre">$keyfile</span>&nbsp; <span class="pre">$sqlite3_files</span> <span class="pre">$id&#64;$loca_ip:$destination</span></tt></p>
<p>Example:</p>
<div class="highlight-python"><pre>scp -r -i ssh.key ./nimbus/ cloudmetrics@futuregrid.iu.edu:nimbus/*</pre>
</div>
</li>
<li><p class="first">Import Nimbus&#8217; sqlite3 database into Cloud Metrics
<tt class="docutils literal"><span class="pre">fg-metric-converter</span> <span class="pre">-p</span> <span class="pre">nimbus</span> <span class="pre">-db</span> <span class="pre">sqlite3</span> <span class="pre">-i</span> <span class="pre">$sqlite3_filepath</span> <span class="pre">-n</span> <span class="pre">$nodename</span></tt></p>
<p>Example with cron:</p>
<div class="highlight-python"><pre>0 6 * * * fg-metric-converter -p nimbus -db sqlite3 -i /nimbus/hotel/hotel -n hotel
0 6 * * * fg-metric-converter -p nimbus -db sqlite3 -i /nimbus/alamo/alamo -n alamo
0 6 * * * fg-metric-converter -p nimbus -db sqlite3 -i /nimbus/foxtrot/foxtrot -n foxtrot
0 6 * * * fg-metric-converter -p nimbus -db sqlite3 -i /nimbus/sierra/sierra -n sierra</pre>
</div>
</li>
</ul>
<p>THIS IS ALL INFORMATION (NEED MORE DETAILS TO FILL IN) ABOUT COLLECTING
RESOURCE INFORMATION FROM IaaS SERVICES.</p>
</div>
</div>
<div class="section" id="generating-pdf-reports">
<h3><a class="toc-backref" href="#id27">Generating PDF reports</a><a class="headerlink" href="#generating-pdf-reports" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li>This has been done in January 2013 for XSEDE REPORT and NSF.</li>
<li>using Sphinx latexpdf</li>
<li>main code is at doc/pdf_reports</li>
</ul>
<p>TODO: THIS NEEDS DOCUMENTATION as how to use it.</p>
<p>readme.rst explains a main concept and gives instruction as how
to do it but haven&#8217;t fully tested. There must be something need to be
addressed and improved ragards to installation guide, instruction.</p>
</div>
<div class="section" id="creating-the-documentation">
<h3><a class="toc-backref" href="#id28">Creating the Documentation</a><a class="headerlink" href="#creating-the-documentation" title="Permalink to this headline">Â¶</a></h3>
</div>
<div class="section" id="production-web-pages-using-sphinx">
<h3><a class="toc-backref" href="#id29">Production Web Pages using Sphinx</a><a class="headerlink" href="#production-web-pages-using-sphinx" title="Permalink to this headline">Â¶</a></h3>
<p>To create the sphinx documentation you must have mysql installed on
your machine as the sphinx autodoc will need the. However if you
remove from the <tt class="docutils literal"><span class="pre">doc/Makefile</span></tt> the manpages after the <tt class="docutils literal"><span class="pre">html:</span></tt>
you can also compile portions of the pages without it.</p>
<p>To create the pages please execute:</p>
<div class="highlight-python"><pre>cd cloud-metric
python setup.py install
cd doc/result
make html</pre>
</div>
<p>If you met all the prerequisits, you will find the index file in:</p>
<div class="highlight-python"><pre>cloud-metric*/???/build/html/index.html</pre>
</div>
<p>On OSX you can for example now look at it with:</p>
<div class="highlight-python"><pre>open build/html/index.html</pre>
</div>
<p>To see the python code:</p>
<div class="highlight-python"><pre>open build/html/modules/modules.html</pre>
</div>
</div>
</div>
<div class="section" id="database-configuration">
<h2><a class="toc-backref" href="#id30">Database Configuration</a><a class="headerlink" href="#database-configuration" title="Permalink to this headline">Â¶</a></h2>
<div class="line-block">
<div class="line">DB access information for MySQL and mongodb needed to run FG CloudMetrics.</div>
<div class="line">MySQL server installation is not required.</div>
</div>
<p>To obtain access information, <a class="reference external" href="https://docs.google.com/document/d/1aAyrEfZpRukqvsf3-HWdKKE5mMolh-EGtBVaZIgDUck/edit">DB access information for FG CloudMetrics</a>
(only accessible by collaborators)</p>
<div class="section" id="obtaining-cloud-usage-information">
<h3><a class="toc-backref" href="#id31">Obtaining Cloud Usage information</a><a class="headerlink" href="#obtaining-cloud-usage-information" title="Permalink to this headline">Â¶</a></h3>
<p>For cloud-metric to work, you naturally need some data to ingest into
it. Cloudmetric can at this time use mostly IaaS log files as input,
but in future we will add additional information sources from other
information providers. Currently we support Eucalyptus, OpenStack, as
well as Nimbus.</p>
</div>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id32">Eucalyptus</a><a class="headerlink" href="#id1" title="Permalink to this headline">Â¶</a></h3>
<p>FG CloudMetrics is collecting accounting information from log files in
a Eucalyptus management server. Two methods have been used: real-time and daily update.</p>
<p>First, we need to specify which files that FG CloudMetrics is looking for:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cc</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
<p>Second, we need to understand what information it does have, for example:</p>
<div class="highlight-python"><pre>[Sun Jan  1 04:11:31 2012][032300][EUCADEBUG ] print_ccInstance(): refresh_instances():  instanceId=i-4791080F reservationId=r-3CC30810 emiId=emi-CD38100F kernelId=eki-78EF12D0 ramdiskId=eri-5BB61250 emiURL=http://149.165.146.130:8773/services/Walrus/jklingin/centos5-6.x86_64.manifest.xml kernelURL=http://149.165.146.130:8773/services/Walrus/xenkernel/vmlinuz-2.6.27.21-0.1-xen.manifest.xml ramdiskURL=http://149.165.146.130:8773/services/Walrus/xeninitrd/initrd-2.6.27.21-0.1-xen.manifest.xml state=Extant ts=1325364349 ownerId=abcde keyName=ssh-rsa sddd abc@eucalyptus ccnet={privateIp=10.128.3.0 publicIp=149.165.159.140 privateMac=D0:0D:47:91:08:0F vlan=14 networkIndex=5} ccvm={cores=1 mem=512 disk=5} ncHostIdx=6 serviceTag=http://i0:8775/axis2/services/EucalyptusNC userData= launchIndex=0 volumesSize=0 volumes={} groupNames={default }</pre>
</div>
<p>Third, we parse and store the information in two ways: real-time, and daily update</p>
<ol class="arabic">
<li><p class="first">Real-time collector with &#8216;tail -f&#8217; like logwatcher.py:</p>
<div class="highlight-python"><pre>``python logwatcher.py | python fg-logparser -i -`` in management server.</pre>
</div>
</li>
</ol>
<p>This way allows us to collect accounting information instantly from logs.</p>
<ul>
<li><dl class="first docutils">
<dt>logwatcher.py script observes cc.log files like a &#8216;tail -f&#8217; command,</dt>
<dd><p class="first last">but it does not lose file control if the cc.log file is rotated to cc.log.1 or .*</p>
</dd>
</dl>
</li>
</ul>
<ol class="arabic" start="2">
<li><p class="first">fg-logparser (FGParser.py) parses log messages and stores metric values into FG Cloud Metrics db.</p>
</li>
<li><p class="first">Daily update:</p>
<div class="highlight-python"><pre>cron runs fg-logparser daily to adjust possible missing messages from real-time collector.
``0 4 * * * fg-logparser -s `date +\%Y\%m\%d -d "1 day ago"` -e `date +\%Y\%m\%d -d "1 day ago"` -i $backup_directory -n $nodename -z (zipped) -tz $timezone (e.g. PST)``</pre>
</div>
</li>
</ol>
<p><strong>This is based on backups of log files</strong></p>
<ol class="arabic" start="4">
<li><p class="first"><tt class="docutils literal"><span class="pre">fg-euca-gather-log-files</span> <span class="pre">(FGCollectFiles.py)</span></tt> makes backups by hourly checking log directory with cron:</p>
<div class="highlight-python"><pre>``2 * * * * fg-euca-gather-log-files``</pre>
</div>
</li>
</ol>
<p>HERE IS AN OLD INCOMPLETE TEXT I FOUND, THERE IS NOW SOME REDUNDANT
INFORMATION HERE WITH OTHER PORTIONS:</p>
<p>Eucalyptus provides a substantial set of log information. The
information is stored in the eucalyptus log directory.  Typically it
is configured by the system administrator with log rotation. This
naturally would mean that the information is lost after a time period
specified by the log rotation configuration. There are two mechanisms
of avoiding this. The first method is to change the eucalyptus
configuration files in order to disable log rotation. However this has
the disadvantage that the directories may fill up and eucalyptus runs
out of space.  How to disable Eucalyptus log rotation is discussed in
the manaula at ... .  However we decided to go another route, buy
copying the Eucalyptus log files after a particular period of time and
place them onto our analysis server and also a backup server. To set
this mechanism up, a Eucalyptus system administrator simply can
install our tools in a predefined directory and call a command that
copies the log files. Ideally This is integrated into a cron script so
that the process is done on regular basis.</p>
<p>To switch on eucalyptus in debug mode &#8216;EUCADEBUG&#8217;  you will have to do the
following</p>
<div class="highlight-python"><pre>change LOGLEVEL to DEBUG in eucalyptus.conf
LOGLEVEL="DEBUG"</pre>
</div>
<p>Reference: <a class="reference external" href="http://manpages.ubuntu.com/manpages/lucid/man5/eucalyptus.conf.5.html">eucalyptus.conf man page</a></p>
<p>This section explains how to make a log backup of eucalyptus using our
tools.  The Eucalyptus Cluster Controller (CC) generates a log file
named <tt class="docutils literal"><span class="pre">cc.log</span></tt>. In many production environments this log file is
stored in rotating fashion so that you have a number attached with the
log file, while keeping the number of log files to a small set as not
to overwhelm the server on which EUcalyptus runs with data.
Naturally for a metric analysis tool such a deployment is not ideal,
as we will lose data soon.</p>
<p>To collect all data, we have written a small tool that looks into the
log files renames them with time stamps and copies them over onto
another machine. This process is best set up via a cronscript, but
could also be performed by hand. As we rename that files based on data
entries from the file, we can invoke the command as many times as we
want. If the data is already copied, the file is not transferred.</p>
<p>Note that in our example the backup directory could be a remote location.</p>
<ol class="arabic" start="5">
<li><p class="first">Log into the management node of eucalyptus that provides access to the log files</p>
</li>
<li><p class="first">Create crontab:</p>
<div class="highlight-python"><pre>#Hourly
0 * * * * fg-euca-gather-log-files -i &lt;directory of log files&gt; -o &lt;directory of backup&gt;</pre>
</div>
</li>
</ol>
<p>A more detailed description is provided as part of the
<a class="reference external" href="./man/fg-euca-gather-log-files.html">fg-euca-gather-log-files</a>
manual page.</p>
<p>Once we collected log files into the backup directory via the
<cite>fg-euca-gather-log-files`</cite> command, we need to parse them into a
convenient database that is easier for us to query. The database
configuration is stored in a file called <tt class="docutils literal"><span class="pre">~/.futuregrid/futuregrid.cfg</span></tt> and
includes hostname, id, password, and port number, thus you need to
store it securely. The file includes the following:</p>
<div class="highlight-python"><pre>[CloudMetricsDB]
host=&lt;yourhostname&gt;
port=&lt;portnumber&gt;
user=&lt;username&gt;
passwd=&lt;password&gt;
db=&lt;dbname&gt;</pre>
</div>
<p>To invoke the parsing all you have to do is specify
the backup directory. The <tt class="docutils literal"><span class="pre">-i</span></tt> flag indicates we insert new data
into existing data:</p>
<div class="highlight-python"><pre>fg-parser -i &lt;directory of the backup&gt;</pre>
</div>
</div>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id33">OpenStack</a><a class="headerlink" href="#id2" title="Permalink to this headline">Â¶</a></h3>
<p>Please refer: <a class="reference external" href="https://docs.google.com/document/d/1aAyrEfZpRukqvsf3-HWdKKE5mMolh-EGtBVaZIgDUck/edit">DB access information for FG CloudMetrics</a>
(only accessible by collaborators) to obtain db access information.</p>
<p>In <tt class="docutils literal"><span class="pre">~/.futuregrid/futuregrid.cfg</span></tt> please add:</p>
<div class="highlight-python"><pre>[NovaDB]
host=&lt;your openstack database host - mysql&gt;
port=&lt;port number&gt;
user=&lt;username&gt;
passwd=&lt;password&gt;
novadb=&lt;nova database name which includes instances table&gt;
keystonedb=&lt;nova keystone database name which includes user table&gt;</pre>
</div>
</div>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id34">Nimbus</a><a class="headerlink" href="#id4" title="Permalink to this headline">Â¶</a></h3>
<p>Nimbus has sqlite3 database to keep the record on cloud usage.
<strong>FG Cloud Metrics</strong> provides a tool to convert service-oriented db into unified FG Cloud Metrics database.
<tt class="docutils literal"><span class="pre">fg-metric-converter</span> <span class="pre">-s</span> <span class="pre">YYYMMDD</span> <span class="pre">-e</span> <span class="pre">YYYMMDD</span> <span class="pre">-p</span> <span class="pre">$cloud_service</span> <span class="pre">(e.g.nimbus)</span> <span class="pre">-db</span> <span class="pre">$db_type</span> <span class="pre">(e.g.</span> <span class="pre">sqlite3,</span> <span class="pre">mysql)</span> <span class="pre">-i</span> <span class="pre">$file_path</span> <span class="pre">(sqlite3</span> <span class="pre">is</span> <span class="pre">used</span> <span class="pre">a</span> <span class="pre">single</span> <span class="pre">file</span> <span class="pre">as</span> <span class="pre">a</span> <span class="pre">database)</span> <span class="pre">-n</span> <span class="pre">$nodename</span> <span class="pre">(e.g.</span> <span class="pre">hotel,</span> <span class="pre">india)</span></tt></p>
<p>For example, FutureGrid collects nimbus data daily and uses cron to convert and store as following:</p>
<div class="highlight-python"><pre>0 6 * * * fg-metric-converter -s `date +\%Y\%m\%d -d "1 day ago"` -e `date +\%Y\%m\%d -d "1 day ago"` -p nimbus -db sqlite3 -i /nimbus/hotel -n hotel
0 6 * * * fg-metric-converter -s `date +\%Y\%m\%d -d "1 day ago"` -e `date +\%Y\%m\%d -d "1 day ago"` -p nimbus -db sqlite3 -i /nimbus/sierra -n sierra
0 6 * * * fg-metric-converter -s `date +\%Y\%m\%d -d "1 day ago"` -e `date +\%Y\%m\%d -d "1 day ago"` -p nimbus -db sqlite3 -i /nimbus/foxtrot -n foxtrot
0 6 * * * fg-metric-converter -s `date +\%Y\%m\%d -d "1 day ago"` -e `date +\%Y\%m\%d -d "1 day ago"` -p nimbus -db sqlite3 -i /nimbus/alamo -n alamo</pre>
</div>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id35">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">Â¶</a></h2>
<p>Now you can use the convenient fg-metric shell to create results. The
reason why we have developed a shell is to allow us to issue
consecutive commands as is typically needed in a production
environment. Here we show an example on how to analyze and create
reports for the year 2012:</p>
<div class="highlight-python"><pre>$ fg-metric-beta
Welcome to FutureGrid Cloud Metrics!
fg-metric] set date 2012-01-01T00:00:00 2012-12-31T00:00:00
fg-metric] set metric runtime
fg-metric] analyze
fg-metric] chart</pre>
</div>
<p>As our metric system can use scripts either via pipe or a file,
you can store more complex queries into a file and start the metric
framework with them:</p>
<div class="highlight-python"><pre>cat examples/example2.txt | fg-metric</pre>
</div>
<p>or with file flag:</p>
<div class="highlight-python"><pre>fg-metric -f examples/example2.txt</pre>
</div>
<div class="section" id="commands">
<h3><a class="toc-backref" href="#id36">Commands</a><a class="headerlink" href="#commands" title="Permalink to this headline">Â¶</a></h3>
<table border="1" class="docutils">
<caption>List of commands</caption>
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="./man/fg-cleanup-db.html">fg-cleanup-db</a></td>
<td>erases the content of the database</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="./man/fg-parser.html">fg-parser</a></td>
<td>parses eucalyptus log entries and includes them into the database</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="./man/fg-euca-gather-log-files.html">fg-euca-gather-log-files</a></td>
<td>gathers all eucalyptus log files into a single directory from the eucalyptus log file directory. This script can be called from cron repeatedly in order to avoid that log data is lost by using log file rotation in eucalyptus.</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="./man/fg-metric.html">fg-metric</a></td>
<td>a shell to interact with the metric database.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="setting-up-a-production-environment">
<h2><a class="toc-backref" href="#id37">Setting up a Production Environment</a><a class="headerlink" href="#setting-up-a-production-environment" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="id6">
<h3><a class="toc-backref" href="#id38">Production Web Pages using Sphinx</a><a class="headerlink" href="#id6" title="Permalink to this headline">Â¶</a></h3>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">The creation of the production pages is prbably not working right</p>
</div>
<p>To create the sphinx documentation you must have mysql installed on
your machine as the sphinx autodoc will need the. However if you
remove from the <tt class="docutils literal"><span class="pre">doc/Makefile</span></tt> the manpages after the <tt class="docutils literal"><span class="pre">html:</span></tt>
you can also compile portions of the pages without it.</p>
<p>To create the pages please execute:</p>
<div class="highlight-python"><pre>cd cloud-metric
python setup.py install
cd doc/result
make html</pre>
</div>
<p>If you met all the prerequisits, you will find the index file in:</p>
<div class="highlight-python"><pre>cloud-metric*/???/build/html/index.html</pre>
</div>
<p>A live example of data produced with cloudmetrics can be found at</p>
<ul class="simple">
<li><a class="reference external" href="http://portal.futuregrid.org/metrics/html/results.html">http://portal.futuregrid.org/metrics/html/results.html</a></li>
</ul>
</div>
<div class="section" id="production-web-pages-using-flask">
<h3><a class="toc-backref" href="#id39">Production Web Pages using Flask</a><a class="headerlink" href="#production-web-pages-using-flask" title="Permalink to this headline">Â¶</a></h3>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">Develop the documentation on how to set up the flask environment</p>
</div>
</div>
<div class="section" id="production-pdf-reports">
<h3><a class="toc-backref" href="#id40">Production PDF Reports</a><a class="headerlink" href="#production-pdf-reports" title="Permalink to this headline">Â¶</a></h3>
<p>PDF Report generator: doc/pdf_reports</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, Developed for FutureGrid by Gregor von Laszewski, Hyungro Lee, Fugang Wang.<br/>
    </p>
  </div>
</footer>
  </body>
</html>